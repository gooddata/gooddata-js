---
layout: api
title: foobar
---
<div id="doc">
    <div id="bd" class="yui3-g">

        <div class="yui3-u-1-4">
            <div id="docs-sidebar" class="sidebar apidocs">
                <div id="api-list">
                    <div id="api-tabview" class="tabview">
                        <div id="api-tabview-filter">
                            <input type="search" id="api-filter" placeholder="Type to filter APIs">
                        </div>
                
                        <div id="api-tabview-panel">
                            <ul class="tabs">
                                <li><a href="#api-modules" class="category">Modules</a>
                                    <ul id="api-modules" class="apis modules">
                                        <li><a href="../modules/admin.html">admin</a></li>
                                        <li><a href="../modules/config.html">config</a></li>
                                        <li><a href="../modules/execution.html">execution</a></li>
                                        <li><a href="../modules/metadata.html">metadata</a></li>
                                        <li><a href="../modules/project.html">project</a></li>
                                        <li><a href="../modules/sdk.html">sdk</a></li>
                                        <li><a href="../modules/user.html">user</a></li>
                                        <li><a href="../modules/util.html">util</a></li>
                                        <li><a href="../modules/xhr.html">xhr</a></li>
                                    </ul>
                                </li>
                                <li><a href="#api-classes" class="category">Classes</a>
                                    <ul id="api-classes" class="apis classes">
                                        <li><a href="../classes/admin.html">admin</a></li>
                                        <li><a href="../classes/config.html">config</a></li>
                                        <li><a href="../classes/execution.html">execution</a></li>
                                        <li><a href="../classes/metadata.html">metadata</a></li>
                                        <li><a href="../classes/project.html">project</a></li>
                                        <li><a href="../classes/sdk.html">sdk</a></li>
                                        <li><a href="../classes/user.html">user</a></li>
                                        <li><a href="../classes/util.html">util</a></li>
                                        <li><a href="../classes/xhr.html">xhr</a></li>
                                    </ul>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="yui3-u-3-4">
            <div class="apidocs">
                <div id="docs-main">
                    <div class="content">
                        <strong>gooddata-js</strong> <span class="version">v3.0.1</span>
                        <h1 class="file-heading">File: src/project.js</h1>
                        
                        <div class="file">
                            <pre class="code prettyprint linenums">
                        // Copyright (C) 2007-2014, GoodData(R) Corporation. All rights reserved.
                        import { post, ajax, del, get, put, parseJSON } from &#x27;./xhr&#x27;;
                        import { getIn, handlePolling } from &#x27;./util&#x27;;
                        
                        /**
                         * Functions for working with projects
                         *
                         * @class project
                         * @module project
                         */
                        
                        
                        /**
                         * Get current project id
                         *
                         * @method getCurrentProjectId
                         * @return {String} current project identifier
                         */
                        export function getCurrentProjectId() {
                            return get(&#x27;/gdc/app/account/bootstrap&#x27;).then((result) =&gt; {
                                const currentProject = result.bootstrapResource.current.project;
                                // handle situation in which current project is missing (e.g. new user)
                                if (!currentProject) {
                                    return null;
                                }
                        
                                return result.bootstrapResource.current.project.links.self.split(&#x27;/&#x27;).pop();
                            });
                        }
                        
                        /**
                         * Fetches projects available for the user represented by the given profileId
                         *
                         * @method getProjects
                         * @param {String} profileId - User profile identifier
                         * @return {Array} An Array of projects
                         */
                        export function getProjects(profileId) {
                            return get(&#x60;/gdc/account/profile/${profileId}/projects&#x60;).then((r) =&gt; {
                                return r.projects.map(p =&gt; p.project);
                            });
                        }
                        
                        /**
                         * Fetches all datasets for the given project
                         *
                         * @method getDatasets
                         * @param {String} projectId - GD project identifier
                         * @return {Array} An array of objects containing datasets metadata
                         */
                        export function getDatasets(projectId) {
                            return get(&#x60;/gdc/md/${projectId}/query/datasets&#x60;).then(getIn(&#x27;query.entries&#x27;));
                        }
                        
                        const DEFAULT_PALETTE = [
                            { r: 0x2b, g: 0x6b, b: 0xae },
                            { r: 0x69, g: 0xaa, b: 0x51 },
                            { r: 0xee, g: 0xb1, b: 0x4c },
                            { r: 0xd5, g: 0x3c, b: 0x38 },
                            { r: 0x89, g: 0x4d, b: 0x94 },
                            { r: 0x73, g: 0x73, b: 0x73 },
                            { r: 0x44, g: 0xa9, b: 0xbe },
                            { r: 0x96, g: 0xbd, b: 0x5f },
                            { r: 0xfd, g: 0x93, b: 0x69 },
                            { r: 0xe1, g: 0x5d, b: 0x86 },
                            { r: 0x7c, g: 0x6f, b: 0xad },
                            { r: 0xa5, g: 0xa5, b: 0xa5 },
                            { r: 0x7a, g: 0xa6, b: 0xd5 },
                            { r: 0x82, g: 0xd0, b: 0x8d },
                            { r: 0xff, g: 0xd2, b: 0x89 },
                            { r: 0xf1, g: 0x84, b: 0x80 },
                            { r: 0xbf, g: 0x90, b: 0xc6 },
                            { r: 0xbf, g: 0xbf, b: 0xbf }
                        ];
                        
                        /**
                         * Fetches a chart color palette for a project represented by the given
                         * projectId parameter.
                         *
                         * @method getColorPalette
                         * @param {String} projectId - A project identifier
                         * @return {Array} An array of objects with r, g, b fields representing a project&#x27;s
                         * color palette
                         */
                        export function getColorPalette(projectId) {
                            return get(&#x60;/gdc/projects/${projectId}/styleSettings&#x60;).then((result) =&gt; {
                                return result.styleSettings.chartPalette.map((c) =&gt; {
                                    return {
                                        r: c.fill.r,
                                        g: c.fill.g,
                                        b: c.fill.b
                                    };
                                });
                            }, (err) =&gt; {
                                if (err.status === 200) {
                                    return DEFAULT_PALETTE;
                                }
                        
                                throw new Error(err.statusText);
                            });
                        }
                        
                        /**
                         * Sets given colors as a color palette for a given project.
                         *
                         * @method setColorPalette
                         * @param {String} projectId - GD project identifier
                         * @param {Array} colors - An array of colors that we want to use within the project.
                         * Each color should be an object with r, g, b fields.
                         */
                        export function setColorPalette(projectId, colors) {
                            return put(&#x60;/gdc/projects/${projectId}/styleSettings&#x60;, {
                                data: {
                                    styleSettings: {
                                        chartPalette: colors.map((fill, idx) =&gt; {
                                            return { fill, guid: &#x60;guid${idx}&#x60; };
                                        })
                                    }
                                }
                            });
                        }
                        
                        /**
                         * Gets current timezone and its offset. Example output:
                         *
                         *     {
                         *         id: &#x27;Europe/Prague&#x27;,
                         *         displayName: &#x27;Central European Time&#x27;,
                         *         currentOffsetMs: 3600000
                         *     }
                         *
                         * @method getTimezone
                         * @param {String} projectId - GD project identifier
                         */
                        export function getTimezone(projectId) {
                            const bootstrapUrl = &#x60;/gdc/app/account/bootstrap?projectId=${projectId}&#x60;;
                        
                            return get(bootstrapUrl).then((result) =&gt; {
                                return result.bootstrapResource.current.timezone;
                            });
                        }
                        
                        export function setTimezone(projectId, timezone) {
                            const timezoneServiceUrl = &#x60;/gdc/md/${projectId}/service/timezone&#x60;;
                            const data = {
                                service: { timezone }
                            };
                        
                            return ajax(timezoneServiceUrl, {
                                method: &#x27;POST&#x27;,
                                body: data
                            }).then(parseJSON);
                        }
                        
                        const isProjectCreated = (project) =&gt; {
                            const projectState = project.content.state;
                        
                            return projectState === &#x27;ENABLED&#x27; ||
                                projectState === &#x27;DELETED&#x27;;
                        };
                        
                        /**
                         * Create project
                         * Note: returns a promise which is resolved when the project creation is finished
                         *
                         * @experimental
                         * @method createProject
                         * @param {String} title
                         * @param {String} authorizationToken
                         * @param {Object} options for project creation (summary, projectTemplate, ...)
                         * @return {Object} created project object
                         */
                        export function createProject(title, authorizationToken, options = {}) {
                            const {
                                summary,
                                projectTemplate,
                                driver = &#x27;Pg&#x27;,
                                environment = &#x27;TESTING&#x27;,
                                guidedNavigation = 1
                            } = options;
                        
                            return post(&#x27;/gdc/projects&#x27;, {
                                body: JSON.stringify({
                                    project: {
                                        content: {
                                            guidedNavigation,
                                            driver,
                                            authorizationToken,
                                            environment
                                        },
                                        meta: {
                                            title,
                                            summary,
                                            projectTemplate
                                        }
                                    }
                                })
                            })
                            .then(parseJSON)
                            .then(project =&gt;
                                handlePolling(project.uri, (response) =&gt; {
                                    return isProjectCreated(response.project);
                                }, options));
                        }
                        
                        /**
                         * Delete project
                         *
                         * @method deleteProject
                         * @param {String} projectId
                         */
                        export function deleteProject(projectId) {
                            return del(&#x60;/gdc/projects/${projectId}&#x60;);
                        }
                        
                            </pre>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

