---
layout: api
title: foobar
---
<div id="doc">
    <div id="bd" class="yui3-g">

        <div class="yui3-u-1-4">
            <div id="docs-sidebar" class="sidebar apidocs">
                <div id="api-list">
                    <div id="api-tabview" class="tabview">
                        <div id="api-tabview-filter">
                            <input type="search" id="api-filter" placeholder="Type to filter APIs">
                        </div>
                
                        <div id="api-tabview-panel">
                            <ul class="tabs">
                                <li><a href="#api-modules" class="category">Modules</a>
                                    <ul id="api-modules" class="apis modules">
                                        <li><a href="../modules/admin.html">admin</a></li>
                                        <li><a href="../modules/config.html">config</a></li>
                                        <li><a href="../modules/DataLayer.html">DataLayer</a></li>
                                        <li><a href="../modules/execution.html">execution</a></li>
                                        <li><a href="../modules/metadata.html">metadata</a></li>
                                        <li><a href="../modules/project.html">project</a></li>
                                        <li><a href="../modules/sdk.html">sdk</a></li>
                                        <li><a href="../modules/util.html">util</a></li>
                                        <li><a href="../modules/xhr.html">xhr</a></li>
                                    </ul>
                                </li>
                                <li><a href="#api-classes" class="category">Classes</a>
                                    <ul id="api-classes" class="apis classes">
                                        <li><a href="../classes/admin.html">admin</a></li>
                                        <li><a href="../classes/config.html">config</a></li>
                                        <li><a href="../classes/DataLayer.html">DataLayer</a></li>
                                        <li><a href="../classes/execution.html">execution</a></li>
                                        <li><a href="../classes/metadata.html">metadata</a></li>
                                        <li><a href="../classes/project.html">project</a></li>
                                        <li><a href="../classes/sdk.html">sdk</a></li>
                                        <li><a href="../classes/util.html">util</a></li>
                                        <li><a href="../classes/xhr.html">xhr</a></li>
                                    </ul>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="yui3-u-3-4">
            <div class="apidocs">
                <div id="docs-main">
                    <div class="content">
                        <strong>gooddata-js</strong> <span class="version">v8.1.1</span>
                        <h1 class="file-heading">File: src/DataLayer/utils/ResultSpecUtils.ts</h1>
                        
                        <div class="file">
                            <pre class="code prettyprint linenums">
                        // (C) 2007-2018 GoodData Corporation
                        import { AFM } from &#x27;@gooddata/typings&#x27;;
                        import {
                            normalizeAfm
                        } from &#x27;./AfmUtils&#x27;;
                        
                        /**
                         * Attaches sorts into resultSpec
                         *
                         * @method applySorting
                         * @param {AFM.IResultSpec} resultSpec
                         * @param {AFM.SortItem[]} sortItems
                         * @returns {AFM.IResultSpec}
                         */
                        export function applySorting(
                            resultSpec: AFM.IResultSpec = {},
                            sortItems: AFM.SortItem[] = []
                        ): AFM.IResultSpec {
                            if (sortItems.length === 0) {
                                return resultSpec;
                            }
                            return {
                                ...resultSpec,
                                sorts: sortItems
                            };
                        }
                        
                        function sortItemIsAttribute(sortItem: AFM.SortItem): sortItem is AFM.IAttributeSortItem {
                            return !!(sortItem as AFM.IAttributeSortItem).attributeSortItem;
                        }
                        
                        function sortItemIsMeasure(sortItem: AFM.SortItem): sortItem is AFM.IMeasureSortItem {
                            return !sortItemIsAttribute(sortItem);
                        }
                        
                        function locatorIsMeasure(locator: AFM.LocatorItem): locator is AFM.IMeasureLocatorItem {
                            return !!(locator as AFM.IMeasureLocatorItem).measureLocatorItem;
                        }
                        
                        function getSortItemIdentifier(sortItem: AFM.SortItem): string | null {
                            if (sortItemIsAttribute(sortItem)) {
                                return sortItem.attributeSortItem.attributeIdentifier;
                            }
                            if (sortItemIsMeasure(sortItem)) {
                                const locator: AFM.LocatorItem = sortItem.measureSortItem.locators[0];
                                if (locatorIsMeasure(locator)) {
                                    return locator.measureLocatorItem.measureIdentifier;
                                }
                            }
                        
                            return null;
                        }
                        
                        /**
                         * Returns true if sortItem fits to afm
                         *
                         * @method isSortValid
                         * @param {AFM.IAfm} afm
                         * @param {AFM.SortItem} sortItem
                         * @returns {boolean}
                         */
                        export function isSortValid(afm: AFM.IAfm, sortItem?: AFM.SortItem): boolean {
                            if (!sortItem) {
                                return true;
                            }
                            const sortIdentifier = getSortItemIdentifier(sortItem);
                            const normalizedAfm = normalizeAfm(afm);
                            return normalizedAfm.measures.some(m =&gt; m.localIdentifier === sortIdentifier)
                                || normalizedAfm.attributes.some(a =&gt; a.localIdentifier === sortIdentifier);
                        }
                        
                            </pre>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

